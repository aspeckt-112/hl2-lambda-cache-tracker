async function fetchCaches(e){try{let t=await fetch("/Index?handler=ObtainedCaches&gameState="+e,{method:"GET"});t.ok?document.getElementById("caches").outerHTML=await t.text():alert("Failed to fetch caches")}catch(a){console.error("Error fetching caches:",a),alert("An error occurred while fetching caches.")}}document.getElementById("uploadForm").addEventListener("submit",async function(e){e.preventDefault();let t=new FormData(this);try{let a=await (await fetch(this.action,{method:"POST",body:t})).json();a.success?await fetchCaches(a.gameState):alert(a.message)}catch(c){console.error("Error during form submission:",c),alert("An error occurred while submitting the form.")}}),document.getElementById("file-upload").addEventListener("change",function(){let e=new Event("submit",{bubbles:!0,cancelable:!0});document.getElementById("uploadForm").dispatchEvent(e)});